(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb=[].slice,lb=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};a=jQuery,a.formance={},a.formance.fn={},a.fn.formance=function(){var b,c;return c=arguments[0],b=2<=arguments.length?kb.call(arguments,1):[],a.formance.fn[c].apply(this,b)},bb=function(b){var c,d;return c=a(b.target),b.metaKey||b.ctrlKey?!0:32===b.which?!1:0===b.which?!0:b.which<33?!0:(d=String.fromCharCode(b.which),!!/[\d\s]/.test(d))},X=function(b){var c,d;return c=a(b.target),b.metaKey||b.ctrlKey?!0:32===b.which?!1:0===b.which?!0:b.which<33?!0:(d=String.fromCharCode(b.which),!!/[\d\sA-Za-z]/.test(d))},P=function(a){var b;return null!=a.prop("selectionStart")&&a.prop("selectionStart")!==a.prop("selectionEnd")?!0:("undefined"!=typeof document&&null!==document&&null!=(b=document.selection)&&"function"==typeof b.createRange?b.createRange().text:void 0)?!0:!1},a.formance.fn.restrictNumeric=function(){return this.on("keypress",bb),this},a.formance.fn.restrictAlphaNumeric=function(){return this.on("keypress",X),this},a.formance.fn.hasTextSelected=P,a=jQuery,P=a.formance.fn.hasTextSelected,e=/(\d{1,4})/g,d=[{type:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,format:e,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:e,length:[14],cvcLength:[3],luhn:!0},{type:"laser",pattern:/^(6706|6771|6709)/,format:e,length:[16,17,18,19],cvcLength:[3],luhn:!0},{type:"jcb",pattern:/^35/,format:e,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^62/,format:e,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:e,length:[16],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^5[1-5]/,format:e,length:[16],cvcLength:[3],luhn:!0},{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:!0},{type:"visa",pattern:/^4/,format:e,length:[13,14,15,16],cvcLength:[3],luhn:!0}],b=function(a){var b,c,e;for(a=(a+"").replace(/\D/g,""),c=0,e=d.length;e>c;c++)if(b=d[c],b.pattern.test(a))return b},c=function(a){var b,c,e;for(c=0,e=d.length;e>c;c++)if(b=d[c],b.type===a)return b},Y=function(b){var c,d,e;return c=a(b.currentTarget),d=String.fromCharCode(b.which),/^\d+$/.test(d)?(e=c.val()+d,e.length<=4):void 0},a.formance.fn.format_credit_card_cvc=function(){return this.formance("restrictNumeric"),this.on("keypress",Y),this},a.formance.fn.validate_credit_card_cvc=function(){var b,d,e,f;return d=a(this).data("credit_card_type"),b=a(this).val(),b=a.trim(b),/^\d+$/.test(b)?d?(e=b.length,lb.call(null!=(f=c(d))?f.cvcLength:void 0,e)>=0):b.length>=3&&b.length<=4:!1},a=jQuery,P=a.formance.fn.hasTextSelected,ab=function(b){var c,d,e;return c=a(b.currentTarget),d=String.fromCharCode(b.which),/^\d+$/.test(d)&&!P(c)?(e=c.val()+d,e=e.replace(/\D/g,""),e.length>6?!1:void 0):void 0},t=function(b){var c,d,e;return d=String.fromCharCode(b.which),/^\d+$/.test(d)?(c=a(b.currentTarget),e=c.val()+d,/^\d$/.test(e)&&"0"!==e&&"1"!==e?(b.preventDefault(),c.val("0"+e+" / ")):/^\d\d$/.test(e)?(b.preventDefault(),c.val(""+e+" / ")):void 0):void 0},w=function(b){var c,d,e;return d=String.fromCharCode(b.which),/^\d+$/.test(d)?(c=a(b.currentTarget),e=c.val(),/^\d\d$/.test(e)?c.val(""+e+" / "):void 0):void 0},z=function(b){var c,d,e;return d=String.fromCharCode(b.which),"/"===d?(c=a(b.currentTarget),e=c.val(),/^\d$/.test(e)&&"0"!==e?c.val("0"+e+" / "):void 0):void 0},i=function(b){var c,d;if(!b.meta&&(c=a(b.currentTarget),d=c.val(),8===b.which&&(null==c.prop("selectionStart")||c.prop("selectionStart")===d.length)))return/\d(\s|\/)+$/.test(d)?(b.preventDefault(),c.val(d.replace(/\d(\s|\/)*$/,""))):/\s\/\s?\d?$/.test(d)?(b.preventDefault(),c.val(d.replace(/\s\/\s?\d?$/,""))):void 0},a.formance.fn.format_credit_card_expiry=function(){return this.formance("restrictNumeric"),this.on("keypress",ab),this.on("keypress",t),this.on("keypress",z),this.on("keypress",w),this.on("keydown",i),this},R=function(a){var b,c,d,e,f;return d=a.replace(/\s/g,""),f=d.split("/",2),b=f[0],e=f[1],2===(null!=e?e.length:void 0)&&/^\d+$/.test(e)&&(c=(new Date).getFullYear(),c=c.toString().slice(0,2),e=c+e),b=parseInt(b,10),e=parseInt(e,10),{month:b,year:e}},a.formance.fn.val_credit_card_expiry=function(){var a;return a=R(this.val()),null==a.month||isNaN(a.month)?!1:null==a.year||isNaN(a.year)?!1:new Date(a.year,a.month-1)},a.formance.fn.validate_credit_card_expiry=function(){var b,c,d,e,f,g,h;return d=R(this.val()),e=d.month,g=d.year,"object"==typeof e&&"month"in e&&(h=e,e=h.month,g=h.year),e&&g?(e=a.trim(e),g=a.trim(g),/^\d+$/.test(e)&&/^\d+$/.test(g)&&parseInt(e,10)<=12?(2===g.length&&(f=(new Date).getFullYear(),f=f.toString().slice(0,2),g=f+g),c=new Date(g,e),b=new Date,c.setMonth(c.getMonth()-1),c.setMonth(c.getMonth()+1,1),c>b):!1):!1},a=jQuery,P=a.formance.fn.hasTextSelected,e=/(\d{1,4})/g,d=[{type:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,format:e,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:e,length:[14],cvcLength:[3],luhn:!0},{type:"laser",pattern:/^(6706|6771|6709)/,format:e,length:[16,17,18,19],cvcLength:[3],luhn:!0},{type:"jcb",pattern:/^35/,format:e,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^62/,format:e,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:e,length:[16],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^5[1-5]/,format:e,length:[16],cvcLength:[3],luhn:!0},{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:!0},{type:"visa",pattern:/^4/,format:e,length:[13,14,15,16],cvcLength:[3],luhn:!0}],b=function(a){var b,c,e;for(a=(a+"").replace(/\D/g,""),c=0,e=d.length;e>c;c++)if(b=d[c],b.pattern.test(a))return b},c=function(a){var b,c,e;for(c=0,e=d.length;e>c;c++)if(b=d[c],b.type===a)return b},Q=function(a){var b,c,d,e,f,g;for(d=!0,e=0,c=(a+"").split("").reverse(),f=0,g=c.length;g>f;f++)b=c[f],b=parseInt(b,10),(d=!d)&&(b*=2),b>9&&(b-=9),e+=b;return e%10===0},Z=function(c){var d,e,f,g;return d=a(c.currentTarget),f=String.fromCharCode(c.which),/^\d+$/.test(f)&&!P(d)?(g=(d.val()+f).replace(/\D/g,""),e=b(g),e?g.length<=e.length[e.length.length-1]:g.length<=16):void 0},V=function(b){return setTimeout(function(){var c,d;return c=a(b.currentTarget),d=c.val(),d=a.formance.formatCardNumber(d),c.val(d)})},q=function(c){var d,e,f,g,h,i,j;return f=String.fromCharCode(c.which),!/^\d+$/.test(f)||(d=a(c.currentTarget),j=d.val(),e=b(j+f),g=(j.replace(/\D/g,"")+f).length,i=16,e&&(i=e.length[e.length.length-1]),g>=i||null!=d.prop("selectionStart")&&d.prop("selectionStart")!==j.length)?void 0:(h=e&&"amex"===e.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/,h.test(j)?(c.preventDefault(),d.val(j+" "+f)):h.test(j+f)?(c.preventDefault(),d.val(j+f+" ")):void 0)},f=function(b){var c,d;return c=a(b.currentTarget),d=c.val(),b.meta||8!==b.which||null!=c.prop("selectionStart")&&c.prop("selectionStart")!==d.length?void 0:/\d\s$/.test(d)?(b.preventDefault(),c.val(d.replace(/\d\s$/,""))):/\s\d?$/.test(d)?(b.preventDefault(),c.val(d.replace(/\s\d?$/,""))):void 0},jb=function(b){var c,e,f,g,h;return c=a(b.currentTarget),h=c.val(),g=a.formance.creditCardType(h)||"unknown",c.hasClass(g)?void 0:(e=function(){var a,b,c;for(c=[],a=0,b=d.length;b>a;a++)f=d[a],c.push(f.type);return c}(),c.removeClass("unknown"),c.removeClass(e.join(" ")),c.addClass(g),c.toggleClass("identified","unknown"!==g),c.trigger("payment.cardType",g))},a.formance.creditCardType=function(a){var c;return a?(null!=(c=b(a))?c.type:void 0)||null:null},a.formance.formatCreditCardNumber=function(a){var c,d,e,f;return(c=b(a))?(e=c.length[c.length.length-1],a=a.replace(/\D/g,""),a=a.slice(0,+e+1||9e9),c.format.global?null!=(f=a.match(c.format))?f.join(" "):void 0:(d=c.format.exec(a),null!=d&&d.shift(),null!=d?d.join(" "):void 0)):a},a.formance.fn.format_credit_card_number=function(){return this.formance("restrictNumeric"),this.on("keypress",Z),this.on("keypress",q),this.on("keydown",f),this.on("keyup",jb),this.on("paste",V),this},a.formance.fn.validate_credit_card_number=function(){var c,d,e;return d=a(this).val(),d=(d+"").replace(/\s+|-/g,""),/^\d+$/.test(d)?(c=b(d),c?(e=d.length,lb.call(c.length,e)>=0&&(c.luhn===!1||Q(d))):!1):!1},a=jQuery,P=a.formance.fn.hasTextSelected,$=function(b){var c,d,e;return c=a(b.currentTarget),d=String.fromCharCode(b.which),/^\d+$/.test(d)&&!P(c)?(e=c.val()+d,e=e.replace(/\D/g,""),e.length>8?!1:void 0):void 0},r=function(b){var c,d,e,f;return d=String.fromCharCode(b.which),/^\d+$/.test(d)?(c=a(b.currentTarget),e=c.val(),f=e+d,/^\d$/.test(f)&&"0"!==d&&"1"!==d&&"2"!==d&&"3"!==d?(b.preventDefault(),c.val("0"+f+" / ")):/^\d{2}$/.test(f)?(b.preventDefault(),c.val(""+f+" / ")):/^\d{2}\s\/\s\d$/.test(f)&&"0"!==d&&"1"!==d?(b.preventDefault(),c.val(""+e+"0"+d+" / ")):/^\d{2}\s\/\s\d{2}$/.test(f)?(b.preventDefault(),c.val(""+f+" / ")):void 0):void 0},u=function(b){var c,d,e;return d=String.fromCharCode(b.which),/^\d+$/.test(d)?(c=a(b.currentTarget),e=c.val(),/^\d{2}$/.test(e)||/^\d{2}\s\/\s\d{2}$/.test(e)?c.val(""+e+" / "):void 0):void 0},x=function(b){var c,d,e,f,g,h,i,j,k;return i=String.fromCharCode(b.which),"/"===i?(c=a(b.currentTarget),j=c.val(),g=/^(\d)$/,h=/^(\d{2})\s\/\s(\d)$/,g.test(j)&&"0"!==j?c.val("0"+j+" / "):h.test(j)&&(k=j.match(h),d=k[0],e=k[1],f=k[2],"0"!==f)?c.val(""+e+" / 0"+f+" / "):void 0):void 0},g=function(b){var c,d;if(!b.meta&&(c=a(b.currentTarget),d=c.val(),8===b.which&&(null==c.prop("selectionStart")||c.prop("selectionStart")===d.length)))return/\d(\s|\/)+$/.test(d)?(b.preventDefault(),c.val(d.replace(/\d(\s|\/)*$/,""))):/\s\/\s?\d?$/.test(d)?(b.preventDefault(),c.val(d.replace(/\s\/\s?\d?$/,""))):void 0},a.formance.fn.format_dd_mm_yyyy=function(){return this.formance("restrictNumeric"),this.on("keypress",$),this.on("keypress",r),this.on("keypress",x),this.on("keypress",u),this.on("keydown",g),this},S=function(a){var b,c,d,e;return e=null!=a?a.replace(/\s/g,"").split("/",3):[0/0,0/0,0/0],b=e[0],c=e[1],d=e[2],(null==d||4!==d.length)&&(d=0/0),b=parseInt(b,10),c=parseInt(c,10),d=parseInt(d,10),{day:b,month:c,year:d}},a.formance.fn.val_dd_mm_yyyy=function(){var a;return a=S(this.val()),null==a.day||isNaN(a.day)?!1:null==a.month||isNaN(a.month)?!1:null==a.year||isNaN(a.year)?!1:new Date(a.year,a.month-1,a.day)},a.formance.fn.validate_dd_mm_yyyy=function(){var a,b;return b=S(this.val()),a=this.formance("val_dd_mm_yyyy"),null!=a&&a instanceof Date?a.getDate()!==b.day?!1:a.getMonth()+1!==b.month?!1:a.getFullYear()!==b.year?!1:!0:!1},a=jQuery,P=a.formance.fn.hasTextSelected,a.formance.fn.format_email=function(){return this},a.formance.fn.validate_email=function(){var b,c,d,e;return c={simple:/^\S+@\S+$/,complex:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\ ".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA -Z\-0-9]+\.)+[a-zA-Z]{2,}))$/},b=a(this),d=b.val(),null==d?!1:(e=b.data("formance_algorithm"),null!=e&&e in c?c[e].test(d):c.simple.test(d))},a=jQuery,a.formance.fn.format_number=function(){var b;return b=a(this).data("formance_length"),null!=b&&a(this).attr("maxLength",b),this.formance("restrictNumeric"),this},a.formance.fn.validate_number=function(){var b,c,d;if(b=a(this),d=b.val(),c=b.data("formance_length"),null!=c&&"number"==typeof c&&d.length!==c)return!1;if(null!=c&&"string"==typeof c&&""!==c){if(isNaN(parseInt(c,10)))return!1;if(d.length!==parseInt(c,10))return!1}return/^\d+$/.test(d)},a=jQuery,P=a.formance.fn.hasTextSelected,cb=function(b){var c,d,e;return c=a(b.currentTarget),d=String.fromCharCode(b.which),/^[a-zA-Z\d]+$/.test(d)&&!P(c)?(e=c.val()+d,e=e.replace(/[^a-zA-Z\d]/g,""),e.length>15?!1:void 0):void 0},D=function(b){var c,d,e,f;if(d=String.fromCharCode(b.which),/^[a-zA-Z\d]+$/.test(d))if(c=a(b.currentTarget),e=c.val(),f=e+d.toUpperCase(),""===e){if(b.preventDefault(),/^[A-Za-z]$/.test(f))return c.val(f)}else if(/^[A-Za-z]\d{0,3}$/.test(e)){if(b.preventDefault(),/^[A-Za-z]\d{4}$/.test(f)&&(f=""+f+" - "),/^[A-Za-z]\d{0,4}[\s|\-]*$/.test(f))return c.val(f)}else if(/^[A-Za-z]\d{4}[\s|\-]*\d{0,4}$/.test(e)&&(b.preventDefault(),/^[A-Za-z]\d{4}[\s|\-]*\d{5}$/.test(f)&&(f=""+f+" - "),/^[A-Za-z]\d{4}[\s|\-]*\d{0,5}[\s|\-]*$/.test(f)))return c.val(f)},j=function(b){var c,d;if(!b.meta&&(c=a(b.currentTarget),d=c.val(),8===b.which&&(null==c.prop("selectionStart")||c.prop("selectionStart")===d.length)))return/\d(\s|\-)+$/.test(d)?(b.preventDefault(),c.val(d.replace(/\d(\s|\-)+$/,""))):void 0},G=function(b){return setTimeout(function(){var c,d,e,f,g,h,i;return c=a(b.currentTarget),h=c.val(),i=h.match(/^([A-Za-z\d]{5})[\s|\-]*(\d{5})[\s|\-]*(\d{5})$/),e=i[0],d=i[1],g=i[2],f=i[3],c.val(""+d+" - "+g+" - "+f)})},a.formance.fn.format_ontario_drivers_license_number=function(){return this.formance("restrictAlphaNumeric"),this.on("keypress",cb),this.on("keypress",D),this.on("keydown",j),this.on("paste",G),this},a.formance.fn.validate_ontario_drivers_license_number=function(){var b,c;return c=a(this).val(),null==c?!1:(c=c.replace(/[\s|\-]/g,""),/^[a-zA-Z\d]+$/.test()?(b=/^[A-Za-z]\d{4}[\s|\-]*\d{5}[\s|\-]*\d{5}$/,b.test(c)):!1)},a=jQuery,P=a.formance.fn.hasTextSelected,db=function(b){var c,d,e;return c=a(b.currentTarget),d=String.fromCharCode(b.which),/^\d+$/.test(d)&&!P(c)?(e=c.val()+d,e=e.replace(/\D/g,""),e.length>15?!1:void 0):void 0},E=function(b){var c,d,e,f;return d=String.fromCharCode(b.which),/^\d+$/.test(d)?(c=a(b.currentTarget),e=c.val(),f=c.val()+d,""===e?(b.preventDefault(),f=/^7$/.test(f)?"708158 ":"708158 "+f,c.val(f)):/^\d{5}$/.test(e)&&(b.preventDefault(),/^\d{6}$/.test(f)&&(f=""+f+" "),/^\d{6}\s*$/.test(f))?target.val(f):void 0):void 0},k=function(b){var c,d;if(!b.meta&&(c=a(b.currentTarget),d=c.val(),8===b.which&&(null==c.prop("selectionStart")||c.prop("selectionStart")===d.length)))return/708158\s+$/.test(d)?(b.preventDefault(),c.val(d.replace(/708158\s+$/,""))):void 0},H=function(b){return setTimeout(function(){var c,d,e,f,g,h;return c=a(b.currentTarget),g=c.val(),h=g.match(/^(\d{6})\s*(\d{9})$/),e=h[0],d=h[1],f=h[2],c.val(""+d+" "+f)})},a.formance.fn.format_ontario_outdoors_card_number=function(){return this.formance("restrictNumeric"),this.on("keypress",db),this.on("keypress",E),this.on("keydown",k),this.on("paste",H),this},a.formance.fn.validate_ontario_outdoors_card_number=function(){var b,c;return c=a(this).val(),null==c?!1:(c=c.replace(/\s/g,""),/^\d+$/.test(c)?(b=/^708158\s*\d{9}$/,b.test(c)):!1)},a=jQuery,P=a.formance.fn.hasTextSelected,eb=function(b){var c,d,e;return c=a(b.currentTarget),d=String.fromCharCode(b.which),/^[a-zA-Z\d]+$/.test(d)&&!P(c)?(e=c.val()+d,e=e.replace(/[^a-zA-Z\d]/g,""),e.length>12?!1:void 0):void 0},F=function(b){var c,d,e,f;if(d=String.fromCharCode(b.which),/^[a-zA-Z\d]+$/.test(d))if(c=a(b.currentTarget),e=c.val(),f=e+d.toUpperCase(),/^\d{0,3}$/.test(e)){if(b.preventDefault(),/^\d{4}$/.test(f)&&(f=""+f+" - "),/^\d{0,4}[\s|\-]*$/.test(f))return c.val(f)}else if(/^\d{4}[\s|\-]*\d{0,2}$/.test(e)){if(b.preventDefault(),/^\d{4}[\s|\-]*\d{3}$/.test(f)&&(f=""+f+" - "),/^\d{4}[\s|\-]*\d{0,3}[\s|\-]*$/.test(f))return c.val(f)}else if(/^\d{4}[\s|\-]*\d{3}[\s|\-]*\d{0,2}$/.test(e)){if(b.preventDefault(),/^\d{4}[\s|\-]*\d{3}[\s|\-]*\d{3}$/.test(f)&&(f=""+f+" - "),/^\d{4}[\s|\-]*\d{3}[\s|\-]*\d{0,3}[\s|\-]*$/.test(f))return c.val(f)}else if(/^\d{4}[\s|\-]*\d{3}[\s|\-]*\d{3}[\s|\-]*[A-Za-z]{0,1}$/.test(e)&&(b.preventDefault(),/^\d{4}[\s|\-]*\d{3}[\s|\-]*\d{3}[\s|\-]*[A-Za-z]{0,2}$/.test(f)))return c.val(f)},l=function(b){var c,d;if(!b.meta&&(c=a(b.currentTarget),d=c.val(),8===b.which&&(null==c.prop("selectionStart")||c.prop("selectionStart")===d.length)))return/\d(\s|\-)+$/.test(d)?(b.preventDefault(),c.val(d.replace(/\d(\s|\-)+$/,""))):void 0},I=function(b){return setTimeout(function(){var c,d,e,f,g,h,i,j;return c=a(b.currentTarget),i=c.val(),j=i.match(/^(\d{4})[\s|\-]*(\d{3})[\s|\-]*(\d{3})[\s|\-]*([A-Za-z]{2})$/),e=j[0],d=j[1],g=j[2],h=j[3],f=j[4],c.val(""+d+" - "+g+" - "+h+" - "+f)})},a.formance.fn.format_ontario_photo_health_card_number=function(){return this.formance("restrictAlphaNumeric"),this.on("keypress",eb),this.on("keypress",F),this.on("keydown",l),this.on("paste",I),this},a.formance.fn.validate_ontario_photo_health_card_number=function(){var b,c;return c=a(this).val(),null==c?!1:(c=c.replace(/[\s|\-]/g,""),/^[a-zA-Z\d]+$/.test()?(b=/^\d{4}[\s|\-]*\d{3}[\s|\-]*\d{3}[\s|\-]*[A-Za-z]{2}$/,b.test(c)):!1)},a=jQuery,P=a.formance.fn.hasTextSelected,W=function(a){var b,c,d,e,f,g;return e=a.replace(/\D/g,"").match(/^(\d{0,3})?(\d{0,3})?(\d{0,4})?$/),g=e,e=g[0],b=g[1],c=g[2],d=g[3],f="",null!=b&&(f+="("+b),3===(null!=b?b.length:void 0)&&(f+=") "),null!=c&&(f+=""+c),3===(null!=c?c.length:void 0)&&(f+=" - "),null!=d&&(f+=""+d),f},fb=function(b){var c,d,e;return c=a(b.currentTarget),d=String.fromCharCode(b.which),/^\d+$/.test(d)&&!P(c)?(e=c.val()+d,e=e.replace(/\D/g,""),e.length>10?!1:void 0):void 0},L=function(b){var c,d,e,f;return d=String.fromCharCode(b.which),/^\d+$/.test(d)?(c=a(b.currentTarget),f=c.val()+d,e=W(f),b.preventDefault(),c.val(e)):void 0},m=function(b){var c,d;if(!b.meta&&(c=a(b.currentTarget),d=c.val(),8===b.which&&(null==c.prop("selectionStart")||c.prop("selectionStart")===d.length)))return/\(\d$/.test(d)?(b.preventDefault(),c.val("")):/\d\)(\s)+$/.test(d)?(b.preventDefault(),c.val(d.replace(/\d\)(\s)*$/,""))):/\d(\s|\-)+$/.test(d)?(b.preventDefault(),c.val(d.replace(/\d(\s|\-)+$/,""))):void 0},J=function(b){return setTimeout(function(){var c,d,e;return c=a(b.currentTarget),e=c.val(),d=W(e),c.val(d)})},a.formance.fn.format_phone_number=function(){return this.formance("restrictNumeric"),this.on("keypress",fb),this.on("keypress",L),this.on("keydown",m),this.on("paste",J),this},a.formance.fn.validate_phone_number=function(){var b;return b=a(this).val(),null==b?!1:(b=b.replace(/\(|\)|\s+|-/g,""),/^\d+$/.test(b)?10===b.replace(/\D/g,"").length:!1)},a=jQuery,P=a.formance.fn.hasTextSelected,gb=function(b){var c,d,e;return c=a(b.currentTarget),d=String.fromCharCode(b.which),/^[a-zA-Z\d]+$/.test(d)&&!P(c)?(e=c.val()+d,e=e.replace(/[^a-zA-Z\d]/g,""),e.length>6?!1:void 0):void 0},M=function(b){var c,d,e,f;if(d=String.fromCharCode(b.which),/^[a-zA-Z\d]+$/.test(d))if(c=a(b.currentTarget),e=c.val(),f=e+d.toUpperCase(),""===e){if(b.preventDefault(),/^[ABCEFGHJKLMNPRSTVXY]$/.test(f))return c.val(f)}else if(/^[ABCEFGHJKLMNPRSTVXY]$/.test(e)){if(b.preventDefault(),/^[ABCEFGHJKLMNPRSTVXY][0-9]$/.test(f))return c.val(f)}else if(/^[ABCEFGHJKLMNPRSTVXY][0-9]$/.test(e)){if(b.preventDefault(),/^[ABCEFGHJKLMNPRSTVXY][0-9][ABCEFGHJKLMNPRSTVWXYZ]$/.test(f))return c.val(""+f+" ")}else if(/^[ABCEFGHJKLMNPRSTVXY][0-9][ABCEFGHJKLMNPRSTVWXYZ]\s$/.test(e)){if(b.preventDefault(),/^[ABCEFGHJKLMNPRSTVXY][0-9][ABCEFGHJKLMNPRSTVWXYZ]\s?[0-9]$/.test(f))return c.val(f)}else if(/^[ABCEFGHJKLMNPRSTVXY][0-9][ABCEFGHJKLMNPRSTVWXYZ]\s?[0-9]$/.test(e)){if(b.preventDefault(),/^[ABCEFGHJKLMNPRSTVXY][0-9][ABCEFGHJKLMNPRSTVWXYZ]\s?[0-9][ABCEFGHJKLMNPRSTVWXYZ]$/.test(f))return c.val(f)}else if(/^[ABCEFGHJKLMNPRSTVXY][0-9][ABCEFGHJKLMNPRSTVWXYZ]\s?[0-9][ABCEFGHJKLMNPRSTVWXYZ]$/.test(e)&&(b.preventDefault(),/^[ABCEFGHJKLMNPRSTVXY][0-9][ABCEFGHJKLMNPRSTVWXYZ]\s?[0-9][ABCEFGHJKLMNPRSTVWXYZ][0-9]$/.test(f)))return c.val(f)},n=function(b){var c,d;if(!b.meta&&(c=a(b.currentTarget),d=c.val(),8===b.which&&(null==c.prop("selectionStart")||c.prop("selectionStart")===d.length)))return/[ABCEFGHJKLMNPRSTVWXYZ](\s)+$/.test(d)?(b.preventDefault(),c.val(d.replace(/[ABCEFGHJKLMNPRSTVWXYZ](\s)*$/,""))):void 0},K=function(b){return setTimeout(function(){var c,d,e,f,g,h;return c=a(b.currentTarget),g=c.val(),h=g.match(/^([ABCEFGHJKLMNPRSTVXY][0-9][ABCEFGHJKLMNPRSTVWXYZ])\s?([0-9][ABCEFGHJKLMNPRSTVWXYZ][0-9])$/),e=h[0],d=h[1],f=h[2],c.val(""+d+" "+f)})},a.formance.fn.format_postal_code=function(){return this.formance("restrictAlphaNumeric"),this.on("keypress",gb),this.on("keypress",M),this.on("keydown",n),this.on("paste",K),this},a.formance.fn.validate_postal_code=function(){var b;return b=a(this).val(),null==b?!1:(b=b.replace(/\s+/g,""),/^[a-zA-Z\d]+$/.test(b)?(b=b.replace(/[^a-zA-Z\d]/g,""),/^[ABCEFGHJKLMNPRSTVXY][0-9][ABCEFGHJKLMNPRSTVWXYZ]\s?[0-9][ABCEFGHJKLMNPRSTVWXYZ][0-9]$/.test(b.toUpperCase())):!1)},a=jQuery,P=a.formance.fn.hasTextSelected,hb=function(b){var c,d,e;return c=a(b.currentTarget),d=String.fromCharCode(b.which),/^\d+$/.test(d)&&!P(c)?(e=c.val()+d,e=e.replace(/\D/g,""),e.length>4?!1:void 0):void 0},N=function(b){var c,d,e,f;return d=String.fromCharCode(b.which),/^\d+$/.test(d)?(c=a(b.currentTarget),e=c.val(),f=e+d,/^\d{2}$/.test(f)?(b.preventDefault(),c.val(""+f+" / ")):/^\d{2}\s\/\s\d{1}$/.test(f)&&"0"!==d&&"1"!==d?(b.preventDefault(),c.val(""+e+"0"+d)):void 0):void 0},B=function(b){var c,d,e;return d=String.fromCharCode(b.which),/^\d+$/.test(d)?(c=a(b.currentTarget),e=c.val(),/^\d{2}$/.test(e)?c.val(""+e+" / "):void 0):void 0},A=function(b){var c,d,e,f;return e=String.fromCharCode(b.which),"/"===e?(c=a(b.currentTarget),f=c.val(),d=/^(\d)$/,d.test(f)&&2===f.length||1===f.length?c.val("0"+f+" / "):void 0):void 0},o=function(b){var c,d;if(!b.meta&&(c=a(b.currentTarget),d=c.val(),8===b.which&&(null==c.prop("selectionStart")||c.prop("selectionStart")===d.length)))return/\d(\s|\/)+$/.test(d)?(b.preventDefault(),c.val(d.replace(/\d(\s|\/)*$/,""))):/\s\/\s?\d?$/.test(d)?(b.preventDefault(),c.val(d.replace(/\s\/\s?\d?$/,""))):void 0},a.formance.fn.format_time_yy_mm=function(){return this.formance("restrictNumeric"),this.on("keypress",hb),this.on("keypress",N),this.on("keypress",B),this.on("keypress",A),this.on("keydown",o),this},T=function(a){var b,c,d;return d=null!=a?a.replace(/\s/g,"").split("/",2):[0/0,0/0],c=d[0],b=d[1],b=parseInt(b,10),c=parseInt(c,10),{years:c,months:b}},a.formance.fn.val_time_yy_mm=function(){var a;return a=T(this.val()),null==a.years||isNaN(a.years)?!1:null==a.months||isNaN(a.months)?!1:a},a.formance.fn.validate_time_yy_mm=function(){var b,c,d;return c=T(this.val()),b=this.formance("val_time_yy_mm"),d=a(this).val(),b.months!==c.months?!1:b.years!==c.years?!1:/^(\d{1}[\d{1}]*)[\s\/]*(\d{1}[\d{1}]*)[\s\/]*$/.test(d)?!0:!1},a=jQuery,P=a.formance.fn.hasTextSelected,ib=function(b){var c,d,e;return c=a(b.currentTarget),d=String.fromCharCode(b.which),/^\d+$/.test(d)&&!P(c)?(e=c.val()+d,e=e.replace(/\D/g,""),e.length>6?!1:void 0):void 0},C=function(b){var c,d,e;return d=String.fromCharCode(b.which),/^\d+$/.test(d)?(c=a(b.currentTarget),e=c.val(),/^\d{2}$/.test(e)||/^\d{2}\s\-\s\d{2}$/.test(e)?c.val(""+e+" - "):void 0):void 0},p=function(b){var c,d;if(!b.meta&&(c=a(b.currentTarget),d=c.val(),8===b.which&&(null==c.prop("selectionStart")||c.prop("selectionStart")===d.length)))return/\d(\s|\-)+$/.test(d)?(b.preventDefault(),c.val(d.replace(/\d(\s|\-)+$/,""))):/\s\-\s?\d?$/.test(d)?(b.preventDefault(),c.val(d.replace(/\s\-\s?\d?$/,""))):void 0},O=function(b){var c,d,e,f;return d=String.fromCharCode(b.which),/^\d+$/.test(d)?(c=a(b.currentTarget),e=c.val(),f=e+d,/^\d{2}$/.test(f)?(b.preventDefault(),c.val(""+f+" - ")):/^\d{2}\s\-\s\d{2}$/.test(f)?(b.preventDefault(),c.val(""+f+" - ")):void 0):void 0},a.formance.fn.format_uk_sort_code=function(){return this.formance("restrictNumeric"),this.on("keypress",ib),this.on("keypress",O),this.on("keypress",C),this.on("keydown",p),this},a.formance.fn.validate_uk_sort_code=function(){var b;return b=a(this).val(),/^(\d{2})[\s\-]*(\d{2})[\s\-]*(\d{2})[\s]*$/.test(b)?!0:!1},a=jQuery,P=a.formance.fn.hasTextSelected,_=function(b){var c,d,e;return c=a(b.currentTarget),d=String.fromCharCode(b.which),/^\d+$/.test(d)&&!P(c)?(e=c.val()+d,e=e.replace(/\D/g,""),e.length>8?!1:void 0):void 0},s=function(b){var c,d,e,f;return d=String.fromCharCode(b.which),/^\d+$/.test(d)?(c=a(b.currentTarget),e=c.val(),f=e+d,/^\d{4}$/.test(f)?(b.preventDefault(),c.val(""+f+" / ")):/^\d{4}\s\/\s\d$/.test(f)&&"0"!==d&&"1"!==d?(b.preventDefault(),c.val(""+e+"0"+d+" / ")):/^\d{4}\s\/\s\d{2}$/.test(f)?(b.preventDefault(),c.val(""+f+" / ")):/^\d{4}\s\/\s\d{2}\s\/\s\d$/.test(f)&&"0"!==d&&"1"!==d&&"2"!==d&&"3"!==d?(b.preventDefault(),c.val(""+e+"0"+d)):void 0):void 0},v=function(b){var c,d,e;return d=String.fromCharCode(b.which),/^\d+$/.test(d)?(c=a(b.currentTarget),e=c.val(),/^\d{4}$/.test(e)||/^\d{4}\s\/\s\d{2}$/.test(e)?c.val(""+e+" / "):void 0):void 0},y=function(b){var c,d,e,f,g,h,i,j;return g=String.fromCharCode(b.which),"/"===g?(c=a(b.currentTarget),h=c.val(),f=/^(\d{4})\s\/\s(\d)$/,f.test(h)&&(j=h.match(f),d=j[0],i=j[1],e=j[2],"0"!==e)?c.val(""+i+" / 0"+e+" / "):void 0):void 0},h=function(b){var c,d;if(!b.meta&&(c=a(b.currentTarget),d=c.val(),8===b.which&&(null==c.prop("selectionStart")||c.prop("selectionStart")===d.length)))return/\d(\s|\/)+$/.test(d)?(b.preventDefault(),c.val(d.replace(/\d(\s|\/)*$/,""))):/\s\/\s?\d?$/.test(d)?(b.preventDefault(),c.val(d.replace(/\s\/\s?\d?$/,""))):void 0},a.formance.fn.format_yyyy_mm_dd=function(){return this.formance("restrictNumeric"),this.on("keypress",_),this.on("keypress",s),this.on("keypress",y),this.on("keypress",v),this.on("keydown",h),this},U=function(a){var b,c,d,e;return e=null!=a?a.replace(/\s/g,"").split("/",3):[0/0,0/0,0/0],d=e[0],c=e[1],b=e[2],(null==d||4!==d.length)&&(d=0/0),b=parseInt(b,10),c=parseInt(c,10),d=parseInt(d,10),{day:b,month:c,year:d}},a.formance.fn.val_yyyy_mm_dd=function(){var a;return a=U(this.val()),null==a.day||isNaN(a.day)?!1:null==a.month||isNaN(a.month)?!1:null==a.year||isNaN(a.year)?!1:new Date(a.year,a.month-1,a.day)},a.formance.fn.validate_yyyy_mm_dd=function(){var a,b;return b=U(this.val()),a=this.formance("val_yyyy_mm_dd"),null!=a&&a instanceof Date?a.getDate()!==b.day?!1:a.getMonth()+1!==b.month?!1:a.getFullYear()!==b.year?!1:!0:!1}}).call(this),function(a){function b(b){b.each(function(){var b=a(this),c="This field is required";b.on("blur",function(){b.closest(".form-group").removeClass("has-error").find("span.validation-message").remove(),a("#errors .alert").remove(),""===b.val()&&(c=b.closest(".form-group").find("label").text()+" is required",b.after('<span class="validation-message fade">'+c+"</span>").closest(".form-group").addClass("has-error").find(".validation-message").addClass("in"),l=!0),"email"===b.attr("id")&&(l||p.test(b.val())||(c="Please enter a valid email address",b.after('<span class="validation-message fade">'+c+"</span>").closest(".form-group").addClass("has-error").find(".validation-message").addClass("in"),l=!0)),"amount"===b.attr("id")&&(l||q.test(b.val())||(c="Please enter a valid amount",b.after('<span class="validation-message fade">'+c+"</span>").closest(".form-group").addClass("has-error").find(".validation-message").addClass("in"),l=!0))})})}function c(b,c){b.on("submit",function(b){return b.preventDefault(),a("span.validation-message").remove(),a(".form-group").removeClass("has-error"),l=!1,c.each(function(){var b=a(this),c="This field is required";""===b.val()&&(c=b.closest(".form-group").find("label").text()+" is required",b.after('<span class="validation-message fade">'+c+"</span>").closest(".form-group").addClass("has-error").find(".validation-message").addClass("in"),m=!0,l=!0),j.is(":checked")||(n=!0,l=!0)}),l?(m?message="Please complete all required fields. ":n&&(message="You must agree to the terms and conditions. "),a("#errors").append('<div class="alert alert-danger">'+message+"</div>"),!1):(a("#submit").addClass("processing").html("Processing &hellip;"),a("#afterSubmit").append('<div class="alert alert-info">Order processing; do not close this window</div>'),!0)})}var d=a("#demoForm");if(d.length){var e=d.find("#name"),f=d.find("#email"),g=d.find("#amount"),h=d.find("#cardNumber"),i=d.find("#cvc"),j=d.find("#terms"),k=e.add(f).add(g).add(h).add(i).add(j),l=!1,m=!1,n=!1,o=0,p=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,q=/^\s*-?[1-9]\d*(\.\d{1,2})?\s*$/;a(".prefill a").on("click",function(a){a.preventDefault(),e.val("First Last"),f.val("test@email.com"),g.val("99.99"),h.val("4005 5500 0000 0001"),i.val("123"),j.prop("checked",!0)}),b(k),c(d,k),h.formance("format_credit_card_number"),h.on("blur",function(){var b=a(this);b.formance("validate_credit_card_number")?(o&&console.log("Card number is valid"),b.closest(".form-group").removeClass("has-error invalid-card").addClass("valid-card").find("span.validation-message").remove()):(o&&console.log("Card number is invalid"),b.after('<span class="validation-message fade">Invalid card number</span>').closest(".form-group").removeClass("valid-card").addClass("has-error invalid-card").find(".validation-message").addClass("in"))})}}(jQuery);